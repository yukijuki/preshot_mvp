{% extends "layout.html" %}

{% block css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block title %}
  <title>Preshot/Home</title>
{% endblock %}

{% block content %}
<div class="card-list">
    
  <!-- Contact Card ~ #01 -->
  {% if files %}
  {% for file in files %}
    <div class="no-card">
    </div>
    <div class="card">
      <div class="banner">
          <!---onlcick to get the link of this emplyee and send it to the API using the Id(link)-->
          <img class="avatar" src={{file.filename}}>
      </div>
      <h3>{{ file.name }}</h3>
      <p>業界 -{{ file.industry }}</p>
      <p>会社 - {{ file.firm }}</p> 
      <ul>
        <a href={{file.link}} target="_blank"><i class="fas fa-comments" style="font-size:18px; color:white;"></i>       もっと見る</a>
      </ul>
    </div>
    <div class="no-card">
    </div>
 
  {% endfor %}
  {% else %}
    <h2>No files</h2>
  {% endif %} 
  
</div>
{% endblock content %}

{% block script %}
<script>
    function submit_entry() {
        
        var link = document.getElementById("link");

        var entry = {
            link: link.value
        }
        console.log(entry)

        fetch(`${window.origin}/employee`, {
            method: "POST",
            credentials: "include",
            body: JSON.stringify(entry),
            cache: "no-cache",
            headers: new Headers({
                "content-type": "application/json"
            })
        }) 
        .then(function (response) {

            if (response.status != 200) {
                console.log(`response status was not 200: ${response.status}`);
                return ;
            }

            response.json().then(function (data) {
                console.log(data)
            })
        })
    }
</script>
{% endblock %}
